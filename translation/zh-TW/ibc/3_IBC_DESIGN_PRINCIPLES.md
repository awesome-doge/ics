# 3：IBC 設計原則

**這是對 IBC“設計原則”的解釋。**

**有關 IBC 規範中使用的術語的定義，請參見[此處](./1_IBC_TERMINOLOGY.md) 。**

**有關架構的概述，請參見[此處](./2_IBC_ARCHITECTURE.md) 。**

**有關一組範例用例，請參見[此處](./4_IBC_USECASES.md) 。**

**有關設計模式的討論，請參見[此處](./5_IBC_DESIGN_PATTERNS.md) 。**

“區塊鏈間通信協議”的設計空間很廣，這個術語本身已經變得太包羅萬象了。 “區塊鏈間通信協議”（IBC）是該設計空間中的一個非常特殊的點，它被選擇為預期的可互操作區塊鏈的鏈間生態系統提供特定的多樣性，局部性，模組化和高效等特性。本文件概述了 IBC 為什麼可以提供這些特性，並列舉了主要的高級設計目標。

## 多樣性

IBC 被設計為*多樣性*協議。該協議支持*異構*區塊鏈，其狀態機用不同的語言實現不同的語義。可以將在 IBC 之上編寫的應用程式*組合*在一起，並且使用 IBC 協議實現*自動化* 。

### 異構性

IBC 可以通過任何滿足基本需求集（快速最終性，常量大小的狀態加密承諾和簡潔的加密承諾證明）的共識算法和狀態機來實現。該協議處理數據身份認證，傳輸和排序（任何多鏈應用程式的共同要求），但與應用程式本身的語義無關。通過 IBC 連接的異構鏈必須了解相容的應用程式層“介面”（例如，用於轉移通證的介面），但是一旦通過 IBC 介面處理程序後，狀態機就可以支持任意訂製的功能（例如，屏蔽交易）。

### 可組合性

協議開發人員和用戶都可以將在 IBC 之上編寫的應用程式組合在一起。 IBC 定義了一組用於身份認證，傳輸和排序的原語，以及一組用於資產和數據語義的應用層標準。支持相容標準的鏈可以連接在一起並和任何選擇創建連接（或重用連接）的用戶進行交互，資產和數據可以跨多個鏈自動（“多跳”）和手動（通過依次發送幾個 IBC 中繼交易）中繼。

### 自動化

IBC 中的“用戶”或“參與者”（可以發起連接，創建通道，發送封包，報告拜占庭欺詐等），可以是但不必須是人類。模組，智慧合約和自動化的鏈下進程，都可以使用該協議（例如，要支付用於計算的 gas 費用成本），並可以自行採取行動或協同行動。設計跨多個鏈的複雜交互（例如建立連接時的三次握手或多跳通證轉移），使得除了單個啟動動作之外的所有動作都可以從用戶那裡抽象出來。最終，可能可以自動啟動一個新的區塊鏈（拋開配置物理基礎架構），然後啟動 IBC 連接，並完全自動使用新鏈的狀態機和吞吐量。

## 模組化

IBC 被設計為*模組化*協議。該協議被構造為一系列具有明確安全屬性和要求的分層組件。特定層上組件的實現可以有所不同（例如不同的共識算法或連接創建過程），只要它們能為更高層提供必要的屬性（例如最終性，<1/3 拜占庭安全性或兩個鏈上的嵌入式受信任狀態）。狀態機僅需要了解 IBC 協議的相容子集（例如，用於彼此共識的輕用戶端驗證算法）即可安全的進行交互。

## 局部性

IBC 被設計為*局部*協議，這意味著僅需要兩個連接著的鏈的訊息就可以探討 IBC 連接的安全性和正確性。身份認證原語的安全性要求僅涉及連接中的區塊鏈的共識算法和驗證人集合，並且維護一組 IBC 連接的區塊鏈僅需要了解其所連接的鏈的狀態（無論這些鏈又連接到哪個鏈）。

### 通訊和訊息的局部性

IBC 對其運行所在的區塊鏈網路的拓撲結構不做任何假設，也不依賴任何特徵。無需查看全局的區塊鏈網路拓撲：可以在兩條鏈之間的單個連接級別上探討安全性和正確性，也可以針對網路拓撲中的子圖探討安全性和正確性。用戶和鏈可以只根據區塊鏈網路圖的一部分已知和假定正確（各種角度）的訊息來探討其假設和風險。

IBC 中沒有必需的“根鏈”-全球網路的某些子圖可能會發展成中心輻射狀結構，某些子圖可能保持緊密連接，某些子圖可能採用更奇特的拓撲。通道是端到端的；在第一個版本中，IBC 僅支持單跳路徑，但將來將支持多跳路徑（儘管涉及共識算法正確性假設，自動路由不一定可行或安全）。

但是，應用程式數據可能具有協議用戶需要注意的顯著的非局部屬性，例如通證的原始來源區域（可能已在複雜的多跳路徑上發送了多次），原始權益和通過跨鏈驗證提供其服務的驗證人的身份，或與管理非同質化通證的特定對象能力鍵相關聯的原始智慧合約。這些非局部屬性不需要由 IBC 協議本身理解，需要由用戶和更高級別的應用來探討。

### 正確假設和安全的局部性

IBC 的用戶（在區塊鏈層次以及在人類或智慧合約層次上）自行選擇哪些共識算法，狀態機和驗證人集合為“假定正確”（以特定方式運行，例如 <1/3 拜占庭）並選擇以哪種方式假設正確性。假設 IBC 協議正確實施，則用戶永遠不會因拜占庭行為或驗證人集合或未明確決定假定為正確的區塊鏈提交的錯誤狀態機轉換而遭受應用層不變數違規（例如資產通漲）的風險。這在預期為大型網路拓撲的互連區塊鏈中尤為重要，在這種拓撲中，一些區塊鏈和驗證人集合有時可能會有意的進行拜占庭行為—  IBC 保守的實現，限制了風險並限制了可能造成的損害。

### 許可的局部性

IBC 中的操作（例如創建連接，創建通道或發送封包）是需要涉及兩條鏈之間特定連接的狀態機和參與者局部許可的。各個鏈可以選擇要求特定應用層操作（例如，委託安全性懲罰）的許可機制（例如，治理）的批准，但是對於基礎協議，操作是無許可的（拋開 gas 費用和存儲成本）-默認情況下，無需任何許可即可創建連接，創建通道和發送封包。當然，用戶自己必須檢查每個 IBC 連接的狀態和共識，並決定使用它是否安全（例如，其存儲是否處於受信任狀態）。

## 高效性

IBC 被設計為一種*高效的*協議：鏈間數據和資產中繼的平攤成本應主要包括底層狀態轉換或與封包相關的操作（例如，轉移通證）的成本，以及一些較小的固定開銷。
